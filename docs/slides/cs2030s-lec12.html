<!DOCTYPE html>
<html>
<head>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="stylesheets/cs1010.css">
<link rel="stylesheet" type="text/css" href="stylesheets/dark.css">

<!-- CHANGE TITLE -->
<title>CS2030S AY20/21 S2 Lecture 12</title>
<meta charset="utf-8">
</head>
<body>
<textarea id="source">
class: middle, center

## CS2030<sub>s</sub>

### Programming Methodology II
---
class: middle, center

## Lecture 12

### 12 April 2021
---
class: middle wide

### Announcements 

### Lab 8

- Due on 16 April 2021 (Friday), 23:59
- Late penalty is waived until Monday 23:59 (19 April, 2021)

---
class: middle wide

### Final Exam

- 28 April 2021 (Wednesday), 17:00 - 19:00
- Scope: Everything
- Duration: 2 hours
- Online via Luminus Quiz
- Open book (printed materials only)

---
class: middle,center

![figures](figures/cs2030s-lec01/cs2030s-lec01.001.png)

---
class: middle

Real-world software is complex, evolves continuously, and is a product of team work. 

---
class: middle

CS2030S teaches you how to write better code, where "better" means:

- more human-friendly
- easier to change and maintain
- fewer crashes

through programming paradigms, idioms, and language design.

---
class: middle

### Reducing Boiler Plates

- Code becomes more succinct and easier to read
- Change should happen only in one place

---
class: middle

### The Abstraction Principle

"Each significant piece of functionality in a program should be implemented in just one place in the source code. Where similar functions are carried out by distinct pieces of code, it is generally beneficial to combine them into one by abstracting out the varying parts." 

-- _Benjamin C. Pierce_

---
class: middle,wide
.smaller[
```Java
    String lastName = user.getLastName();
    if (lastName == null) {
      lastName = "";
    } 
    show(lastName.toUpperCase());

    String firstName = user.getFirstName();
    if (firstName == null) {
      firstName = "";
    }
    show(firstName.toUpperCase());
```
]
---
class: middle,wide
.smaller[
```Java
    PhoneNumber phoneNumber = user.getOfficeNumber();
    if (phoneNumber == null) {
      phoneNumber = user.getMainLineNumber();
    }
    save(phoneNumber.toString());

    PhoneNumber mobileNumber = user.getMobileNumber();
    if (mobileNumber == null) {
      mobileNumber = user.getMainLineNumber();
    }
    save(mobileNumber.toString());
```
]

---
class: middle,wide
.smaller[
```java
    int code;
    Address addr = user.getAddress();
    if (addr == null) {
      if (addr.getCountry().equals("Singapore")) {
        code = addr.getPostalCode();
      } else {
        code = 0;
      }
    } else {
      code = 0;
    }
```
]
---
class: middle
.smaller[
```Java
  void handleName(String name) {
    if (name == null) {
      name = "";
    } 
    show(name.toUpperCase());
  }

  handleName(user.getLastName());
  handleName(user.getFirstName());
```
]
---
class: middle
.smaller[
```Java
  void handlePhoneNumber(User user, PhoneNumber num) {
    if (num == null) {
      num = user.getMainLineNumber();
    } 
    save(num.toString());
  }

  handlePhoneNumber(user, user.getOfficeNumber());
  handlePhoneNumber(user, user.getMobileNumber());
```
]

---
class: middle, wide
.tiny[
```Java
  public static <T> void handle(T item, Producer<T> p, Transformer<T,String> t, 
      Consumer<String> c) {
    if (item == null) {
      item = p.produce();
    } 
    c.consume(t.transform(item));
  }
```
]

---
class: middle, wide
.tiny[
```Java
  public static void handleName(String name) {
    handle(name, 
        () -> "",
        x -> x.toUpperCase(),
        x -> show(x));
  }

  public static void handlePhoneNumber(User user, PhoneNumber number) {
    handle(number, 
        () -> user.getMainLineNumber(),
        x -> x.toString(),
        x -> save(x));
  }
```
]
---
class: middle,wide
.smaller[
```Java
    int code;
    Address addr = user.getAddress();
    if (addr == null) {
      if (addr.getCountry().equals("Singapore")) {
        code = addr.getPostalCode();
      } else {
        code = 0;
      }
    } else {
      code = 0;
    }
```
]
---
class: middle, wide
.tiny[
```Java
  public static <T,R> void get(T item, BooleanCondition<T> bc, Transformer<T,R> t,
      Producer<R> p) {
    if (item == null) {
	  if (bc.test(item)) {
	 	return t.transform(item);
	  } else {
		return p.produce();
	  }
	}  else {
	  return p.produce();
	}
  }
```
]

---
class: middle, wide
.tiny[
```Java
  public static void handleName(String name) {
    Optional.of(name)
      .or(() -> Optional.of(""))
      .map(s -> s.toUpperCase())
      .ifPresent(s -> show(s));
  }

  public static void handlePhoneNumber(User user, PhoneNumber number) {
    Optional.of(number)
      .or(() -> Optional.of(user.getMainLineNumber()))
      .map(p -> p.toString())
      .ifPresent(s -> show(s));
  }
```
]

---
class: middle, wide
.smaller[
```Java
    int code = Optional.of(addr)
      .filter(a -> a.getCountry().equals("Singapore"))
      .map(a -> a.getPostalCode())
      .orElse(0);
```
]

---
class: middle, center
background-image: url(figures/memes/expand-mind-abstraction.jpg)

---
class: middle, center

# OOP vs FP

---
class: middle, center
background-image: url(figures/memes/two-buttons-oop-vs-fp.jpg)

---
class: middle, center

We are not telling you "OOP is better" or "FP is better"

---
class: middle, center

"Here are different ways you can write your code.  Pick one that is best for you."

---
class: middle

- Core strength of OOP is polymorphism (easy to extend)
- Core strength of FP is referential transparency (easy to reason)

---
class: middle

"OO programming is good, when you know what it is.  Functional programming is good, when you know what it is.  And functional OO programming is also good, once you know what it is" - Uncle Bob.

---
class: middle, center
background-image: url(figures/memes/both-buttons-oop-vs-fp.jpg)

---
class: middle, center

# Java vs. Other Languages

---
class: middle, center

### Java is a nice OOP language, but a clunky FP language

But, sometimes, you have no choice.

---
class: middle

### If you have to use Java, consider other libraries with immutability collections and other monadic constructs

- JOOL, Vavr, Fugue
- Google Guava
- Apache Commons
- etc

---
class: middle


### If you have other languages to choose from:

- *Parallel/Concurrent*: Erlang, Go, etc
- *Functional*: Haskell, Erlang, OCaml, F#, etc
- *OO Functional*: JS, Kotlin, Scala, Groovy, Switft, etc, 

---
class: middle, center

### What's Next After CS2030S?

---
class: middle, center

### CS2103T Intro to Software Engineering

(and other Software Engineering modules)

---
class: middle

- work in teams
- version control
- program analysis
-  :

---
class: middle, center

### CS2104 Concepts of Programming Languages

(and other Programming Language modules)

---
class: middle

- pure functional languages
- how to build a compiler
- how to implement a language
-   :

---
class: middle, center

### CS3210 Parallel Computing
### CS3211 Parallel and Concurrent Programming

(and CS2106 Operating Systems before that)

---
class: middle

- designing, programming, debugging multi-threaded programs
- parallelization with GPU/CUDA
-   :

---
class: middle

CS2030S _has taught_ you how to write better code, where "better" means:

- more human-friendly
- easier to change and maintain
- fewer crashes

---
class: middle,center

## The End

---
class: bottom

.tiny[
Version: v1.0

Last Updated: Mon Mar 15 13:32:04 +08 2021
]
</textarea>

<script src="https://remarkjs.com/downloads/remark-latest.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript"></script>
<script src="javascripts/counter.js">
</script>
<script>
remark.macros.scale = function (percentage) {
	var url = this;
	return '<img src="' + url + '" style="width: ' + percentage + '" />';
};
// ![:scale 50%](image.jpg)

var slideshow = remark.create({
    navigation: {
	    scroll: false
	},
	ratio: '16:9',
	highlightStyle: 'ir-black',
    slideNumberFormat: 'CS2030S AY20/21 S2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%current%',
});
 // Setup MathJax
  MathJax.Hub.Config({
	  tex2jax: {
		inlineMath: [['$', '$']],
		// inlineMath: [['$', '$'], ['\\(', '\\)']],
		displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
		skipTags: ['script', 'noscript', 'style', 'pre']
	  }
  });

  MathJax.Hub.Configured();
</script>
</body>
</html>
